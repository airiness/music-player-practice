<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta
            name="viewport"
            content="width=device-width,initial-scale=1.0,user-scalable=no,minimum-scale=1.0,maximum-scale=1.0"
        />

        <title>Music Home Page</title>
        <link rel="stylesheet" href="css/index.css" />
    </head>
    <body>
        <div id="wrap">
            <!--  -->
            <div class="scroll-bar"></div>
            <!--  -->
            <div class="head">
                <!--  -->
                <div class="head-top">
                    <h1 class="logo">
                        <a href="#">
                            <img src="img/img-2.svg" alt="" />
                        </a>
                    </h1>
                    <!--  -->
                    <a href="javascript:;" class="menu-btn"></a>
                    <!--  -->
                    <div class="btns">
                        <a href="javascript:;" class="search">Search</a>
                        <a href="javascript:;">LogIn</a>
                        <a href="javascript:;">SignIn</a>
                    </div>
                </div>
                <!--  -->
                <div class="head-bottom">
                    <form method="post">
                        <input type="text" placeholder="Click Me" />
                        <input type="submit" value="search" />
                    </form>
                </div>
                <ul class="mask">
                    <li><a href="javascript:;">Home</a></li>
                    <li><a href="javascript:;">Home</a></li>
                    <li><a href="javascript:;">Home</a></li>
                    <li><a href="javascript:;">Home</a></li>
                    <li><a href="javascript:;">Home</a></li>
                    <li><a href="javascript:;">Home</a></li>
                    <li><a href="javascript:;">Home</a></li>
                    <li><a href="javascript:;">Home</a></li>
                    <li><a href="javascript:;">Home</a></li>
                    <li><a href="javascript:;">Home</a></li>
                    <li><a href="javascript:;">Home</a></li>
                    <li><a href="javascript:;">Home</a></li>
                </ul>
            </div>
            <div class="content">
                <div>
                    <div class="damu-nav-drag-wrapper">
                        <ul class="list">
                            <li><a href="javascript:;" class="active">ElysiumA</a></li>
                            <li><a href="javascript:;">ElysiumB</a></li>
                            <li><a href="javascript:;">ElysiumC</a></li>
                            <li><a href="javascript:;">ElysiumD</a></li>
                            <li><a href="javascript:;">ElysiumE</a></li>
                            <li><a href="javascript:;">ElysiumF</a></li>
                            <li><a href="javascript:;">ElysiumG</a></li>
                            <li><a href="javascript:;">ElysiumH</a></li>
                            <li><a href="javascript:;">ElysiumI</a></li>
                            <li><a href="javascript:;">ElysiumJ</a></li>
                            <li><a href="javascript:;">ElysiumK</a></li>
                            <li><a href="javascript:;">ElysiumL</a></li>
                            <li><a href="javascript:;">ElysiumM</a></li>
                            <li><a href="javascript:;">ElysiumN</a></li>
                            <li><a href="javascript:;">ElysiumO</a></li>
                            <li><a href="javascript:;">ElysiumP</a></li>
                        </ul>
                    </div>
                    <!--  -->
                    <!-- <div class="carousel-wrap"> -->
                    <div class="carousel-wrap" needAuto needCarousel>
                        <div class="points-wrap"></div>
                    </div>
                    <!--  -->
                    <div class="tap-wrap">
                        <div class="tap-head">
                            <h2>MV Uper</h2>
                            <span>More&gt</span>
                        </div>
                        <div class="tap-nav">
                            <a href="javascript:;">All</a>
                            <a href="javascript:;">China</a>
                            <a href="javascript:;">Very Long Tab</a>
                            <a href="javascript:;">Japan</a>
                            <a href="javascript:;">America</a>
                            <a href="javascript:;">Korea</a>
                            <div class="small-g"></div>
                        </div>
                        <div class="tap-content">
                            <ul class="tap-loading"></ul>
                            <ul>
                                <li>
                                    <a href="javascript:;">
                                        <img src="img/a.png" alt="" />
                                        <span>君が世界一番好きな人だ、送る花がないないきれい</span>
                                    </a>
                                    <div class="tap-discuss">
                                        <div class="right">
                                            <span></span>
                                            <span>6</span>
                                        </div>
                                        <div class="left">
                                            <span></span>
                                            <span>6666</span>
                                        </div>
                                    </div>
                                </li>
                                <li>
                                    <a href="javascript:;">
                                        <img src="img/a.png" alt="" />
                                        <span>君が世界一番好きな人だ、送る花がないないきれい</span>
                                    </a>
                                    <div class="tap-discuss">
                                        <div class="right">
                                            <span></span>
                                            <span>6</span>
                                        </div>
                                        <div class="left">
                                            <span></span>
                                            <span>6666</span>
                                        </div>
                                    </div>
                                </li>
                                <li>
                                    <a href="javascript:;">
                                        <img src="img/a.png" alt="" />
                                        <span>君が世界一番好きな人だ、送る花がないないきれい</span>
                                    </a>
                                    <div class="tap-discuss">
                                        <div class="right">
                                            <span></span>
                                            <span>6</span>
                                        </div>
                                        <div class="left">
                                            <span></span>
                                            <span>6666</span>
                                        </div>
                                    </div>
                                </li>
                                <li>
                                    <a href="javascript:;">
                                        <img src="img/a.png" alt="" />
                                        <span>君が世界一番好きな人だ、送る花がないないきれい</span>
                                    </a>
                                    <div class="tap-discuss">
                                        <div class="right">
                                            <span></span>
                                            <span>6</span>
                                        </div>
                                        <div class="left">
                                            <span></span>
                                            <span>6666</span>
                                        </div>
                                    </div>
                                </li>
                                <li>
                                    <a href="javascript:;">
                                        <img src="img/a.png" alt="" />
                                        <span>君が世界一番好きな人だ、送る花がないないきれい</span>
                                    </a>
                                    <div class="tap-discuss">
                                        <div class="right">
                                            <span></span>
                                            <span>6</span>
                                        </div>
                                        <div class="left">
                                            <span></span>
                                            <span>6666</span>
                                        </div>
                                    </div>
                                </li>
                                <li>
                                    <a href="javascript:;">
                                        <img src="img/a.png" alt="" />
                                        <span>君が世界一番好きな人だ、送る花がないないきれい</span>
                                    </a>
                                    <div class="tap-discuss">
                                        <div class="right">
                                            <span></span>
                                            <span>6</span>
                                        </div>
                                        <div class="left">
                                            <span></span>
                                            <span>6666</span>
                                        </div>
                                    </div>
                                </li>
                            </ul>
                            <ul class="tap-loading"></ul>
                        </div>
                    </div>
                    <div class="tap-wrap">
                        <div class="tap-head">
                            <h2>MV Uper</h2>
                            <span>More&gt</span>
                        </div>
                        <div class="tap-nav">
                            <a href="javascript:;">All</a>
                            <a href="javascript:;">China</a>
                            <a href="javascript:;">Very Long Tab</a>
                            <a href="javascript:;">Japan</a>
                            <a href="javascript:;">America</a>
                            <a href="javascript:;">Korea</a>
                            <div class="small-g"></div>
                        </div>
                        <div class="tap-content">
                            <ul class="tap-loading"></ul>
                            <ul>
                                <li>
                                    <a href="javascript:;">
                                        <img src="img/a.png" alt="" />
                                        <span>君が世界一番好きな人だ、送る花がないないきれい</span>
                                    </a>
                                    <div class="tap-discuss">
                                        <div class="right">
                                            <span></span>
                                            <span>6</span>
                                        </div>
                                        <div class="left">
                                            <span></span>
                                            <span>6666</span>
                                        </div>
                                    </div>
                                </li>
                                <li>
                                    <a href="javascript:;">
                                        <img src="img/a.png" alt="" />
                                        <span>君が世界一番好きな人だ、送る花がないないきれい</span>
                                    </a>
                                    <div class="tap-discuss">
                                        <div class="right">
                                            <span></span>
                                            <span>6</span>
                                        </div>
                                        <div class="left">
                                            <span></span>
                                            <span>6666</span>
                                        </div>
                                    </div>
                                </li>
                                <li>
                                    <a href="javascript:;">
                                        <img src="img/a.png" alt="" />
                                        <span>君が世界一番好きな人だ、送る花がないないきれい</span>
                                    </a>
                                    <div class="tap-discuss">
                                        <div class="right">
                                            <span></span>
                                            <span>6</span>
                                        </div>
                                        <div class="left">
                                            <span></span>
                                            <span>6666</span>
                                        </div>
                                    </div>
                                </li>
                                <li>
                                    <a href="javascript:;">
                                        <img src="img/a.png" alt="" />
                                        <span>君が世界一番好きな人だ、送る花がないないきれい</span>
                                    </a>
                                    <div class="tap-discuss">
                                        <div class="right">
                                            <span></span>
                                            <span>6</span>
                                        </div>
                                        <div class="left">
                                            <span></span>
                                            <span>6666</span>
                                        </div>
                                    </div>
                                </li>
                                <li>
                                    <a href="javascript:;">
                                        <img src="img/a.png" alt="" />
                                        <span>君が世界一番好きな人だ、送る花がないないきれい</span>
                                    </a>
                                    <div class="tap-discuss">
                                        <div class="right">
                                            <span></span>
                                            <span>6</span>
                                        </div>
                                        <div class="left">
                                            <span></span>
                                            <span>6666</span>
                                        </div>
                                    </div>
                                </li>
                                <li>
                                    <a href="javascript:;">
                                        <img src="img/a.png" alt="" />
                                        <span>君が世界一番好きな人だ、送る花がないないきれい</span>
                                    </a>
                                    <div class="tap-discuss">
                                        <div class="right">
                                            <span></span>
                                            <span>6</span>
                                        </div>
                                        <div class="left">
                                            <span></span>
                                            <span>6666</span>
                                        </div>
                                    </div>
                                </li>
                            </ul>
                            <ul class="tap-loading"></ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <script src="js/damu.js"></script>
        <script src="js/tools.js"></script>
        <script type="text/javascript">
            window.onload = function (ev) {
                document.addEventListener("touchstart", function () {
                    ev = ev || event;
                    ev.preventDefault();
                });

                (function () {
                    var styleNode = document.createElement("style");
                    var w = document.documentElement.clientWidth / 16;
                    styleNode.innerHTML = "html{font-size:" + w + "px!important}";
                    document.head.appendChild(styleNode);
                })();

                var aNodes = document.querySelectorAll("#wrap .head .head-top .btns a");
                var headBottom = document.querySelector("#wrap .head .head-bottom");
                var bar = document.querySelector("#wrap .scroll-bar");
                var head = document.querySelector("#wrap .head");
                var h = head.offsetHeight;
                var flag = true;

                aNodes[0].addEventListener("touchend", function () {
                    if (damu.css(bar, "translateY") > h) {
                        if (flag) {
                            headBottom.style.display = "none";
                        } else {
                            headBottom.style.display = "block";
                        }
                        flag = !flag;
                    }
                });

                vMove();
                function vMove() {
                    var headBottom = document.querySelector("#wrap .head .head-bottom");
                    var head = document.querySelector("#wrap .head");
                    var h = head.offsetHeight;
                    var content = document.querySelector("#wrap .content");
                    var wrap = document.querySelector("#wrap .content > div");
                    var bar = document.querySelector("#wrap .scroll-bar");
                    var scale = document.documentElement.clientHeight / (head.offsetHeight + wrap.offsetHeight);
                    bar.style.height = document.documentElement.clientHeight * scale + "px";
                    var callback = {
                        start: function () {
                            bar.style.opacity = 1;
                        },
                        move: function () {
                            var scale = damu.css(this, "translateY") / (wrap.offsetHeight - content.clientHeight);
                            damu.css(
                                bar,
                                "translateY",
                                -scale * (document.documentElement.clientHeight - bar.offsetHeight)
                            );

                            if (damu.css(bar, "translateY") > h) {
                                headBottom.style.display = "none";
                                flag = false;
                            } else if (damu.css(bar, "translateY") < h) {
                                headBottom.style.display = "block";
                                flag = true;
                            }
                        },
                        autoMove: function () {
                            var scale = damu.css(this, "translateY") / (wrap.offsetHeight - content.clientHeight);
                            damu.css(
                                bar,
                                "translateY",
                                -scale * (document.documentElement.clientHeight - bar.offsetHeight)
                            );
                        },
                        end: function () {
                            bar.style.opacity = 0;
                        },
                    };
                    damu.vMove(content, callback);
                }

                tap();
                function tap() {
                    var wrap = document.querySelector("#wrap .content .tap-wrap");
                    var contentNodes = document.querySelectorAll("#wrap .content .tap-wrap .tap-content");
                    var w = wrap.offsetWidth;
                    for (var i = 0; i < contentNodes.length; i++) {
                        move(contentNodes[i]);
                    }

                    function move(content) {
                        var now = 0;
                        var smallG = content.parentNode.querySelector(".tap-nav .small-g");
                        var aNodes = content.parentNode.querySelectorAll(".tap-nav a");
                        var loadings = content.querySelectorAll(".tap-loading");
                        damu.css(content, "translateX", -w);
                        smallG.style.width = aNodes[0].offsetWidth + "px";

                        var startPoint = {};
                        var elementPoint = { x: 0, y: 0 };
                        var isX = true;
                        var isFirst = true;

                        var isOver = false;
                        content.addEventListener("touchstart", function (ev) {
                            if (isOver) {
                                return;
                            }
                            ev = ev || event;
                            var touchC = ev.changedTouches[0];

                            startPoint = touchC;
                            elementPoint.x = damu.css(content, "translateX");
                            elementPoint.y = damu.css(content, "translateY");

                            isX = true;
                            isFirst = true;

                            content.style.transition = "none";
                        });
                        content.addEventListener("touchmove", function (ev) {
                            if (isOver) {
                                return;
                            }
                            if (!isX) {
                                return;
                            }

                            ev = ev || event;
                            var touchC = ev.changedTouches[0];

                            var nowPoint = {};
                            var dis = { x: 0, y: 0 };
                            nowPoint = touchC;
                            dis.x = nowPoint.clientX - startPoint.clientX;
                            dis.y = nowPoint.clientY - startPoint.clientY;

                            if (isFirst) {
                                isFirst = false;
                                if (Math.abs(dis.y) > Math.abs(dis.x)) {
                                    isX = false;
                                    return;
                                }
                            }

                            var translateX = elementPoint.x + dis.x;
                            damu.css(content, "translateX", translateX);

                            jump(dis.x);
                        });
                        content.addEventListener("touchend", function (ev) {
                            if (isOver) {
                                return;
                            }
                            ev = ev || event;
                            var touchC = ev.changedTouches[0];
                            var nowPoint = {};
                            var dis = { x: 0, y: 0 };
                            nowPoint = touchC;
                            dis.x = nowPoint.clientX - startPoint.clientX;

                            if (Math.abs(dis.x) <= w / 2) {
                                content.style.transition = "1s transform";
                                damu.css(content, "translateX", -w);
                            }
                        });

                        function jump(disX) {
                            if (isOver) {
                                return;
                            }
                            if (Math.abs(disX) > w / 2) {
                                isOver = true;
                                content.style.transition = "1s transform";
                                var targetX = disX > 0 ? 0 : -2 * w;
                                damu.css(content, "translateX", targetX);

                                content.addEventListener("transitionend", endFn);
                                content.addEventListener("webkitTransitionEnd", endFn);

                                function endFn() {
                                    content.removeEventListener("transitionend", endFn);
                                    content.removeEventListener("webkitTransitionEnd", endFn);
                                    content.style.transition = "none";

                                    for (var i = 0; i < loadings.length; i++) {
                                        loadings[i].style.opacity = 1;
                                    }

                                    disX > 0 ? now-- : now++;
                                    if (now < 0) {
                                        now = aNodes.length - 1;
                                    } else if (now > aNodes.length - 1) {
                                        now = 0;
                                    }
                                    damu.css(smallG, "translateX", aNodes[now].offsetLeft);
                                    if (aNodes[now].offsetWidth != smallG.offsetWidth) {
                                        smallG.style.width = aNodes[now].offsetWidth + "px";
                                    }

                                    setTimeout(function () {
                                        for (var i = 0; i < loadings.length; i++) {
                                            loadings[i].style.opacity = 0;
                                        }
                                        damu.css(content, "translateX", -w);

                                        isOver = false;
                                    }, 2000);
                                }
                            }
                        }
                    }
                }

                changeColor();
                function changeColor() {
                    var list = document.querySelector("#wrap .content .damu-nav-drag-wrapper .list");
                    var aNodes = document.querySelectorAll("#wrap .content .damu-nav-drag-wrapper .list>li a");

                    list.addEventListener("touchstart", function () {
                        this.isMove = false;
                    });
                    list.addEventListener("touchmove", function () {
                        this.isMove = true;
                    });

                    list.addEventListener("touchend", function (ev) {
                        if (this.isMove) {
                            return;
                        }
                        ev = ev || event;
                        var touchC = ev.changedTouches[0];
                        for (var i = 0; i < aNodes.length; i++) {
                            tools.removeClass(aNodes[i], "active");
                        }
                        tools.addClass(touchC.target, "active");
                    });
                }

                swiper();
                function swiper() {
                    var arr = ["img/b.png", "img/b.png", "img/b.png", "img/b.png", "img/c.png"];
                    damu.carousel(arr);
                }

                drag();
                function drag() {
                    damu.dragNav();
                }

                changeFocus();
                function changeFocus() {
                    var inputText = document.querySelector("#wrap .head .head-bottom form input[type='text']");
                    inputText.addEventListener("touchstart", function (ev) {
                        ev = ev || event;
                        this.focus();
                        ev.stopPropagation();
                        ev.preventDefault();
                    });
                    document.addEventListener("touchstart", function () {
                        inputText.blur();
                    });
                }

                CMCFMenuBtn();
                function CMCFMenuBtn() {
                    var menuBtn = document.querySelector("#wrap .head .head-top .menu-btn");
                    var mask = document.querySelector("#wrap .head .mask");

                    var isXX = false;
                    menuBtn.addEventListener("touchstart", function (ev) {
                        ev = ev || event;
                        var touchC = ev.changedTouches[0];
                        if (!isXX) {
                            tools.addClass(menuBtn, "active");
                            mask.style.display = "block";
                        } else {
                            tools.removeClass(menuBtn, "active");
                            mask.style.display = "none";
                        }
                        isXX = !isXX;
                        ev.stopPropagation();
                        ev.preventDefault();
                    });

                    document.addEventListener("touchstart", function () {
                        if (isXX) {
                            tools.removeClass(menuBtn, "active");
                            mask.style.display = "none";
                            isXX = !isXX;
                        }
                    });

                    mask.addEventListener("touchstart", function (ev) {
                        ev = ev || event;
                        ev.stopPropagation();
                        ev.preventDefault();
                    });
                }
            };
        </script>
    </body>
</html>
